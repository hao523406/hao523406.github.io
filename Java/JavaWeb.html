<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaWeb | Hao-Blog</title>
    <meta name="description" content="专注互联网技术">
    
    
    <link rel="preload" href="/assets/css/0.styles.595b60ed.css" as="style"><link rel="preload" href="/assets/js/app.04a292d2.js" as="script"><link rel="preload" href="/assets/js/2.4fad892d.js" as="script"><link rel="preload" href="/assets/js/7.35746c6c.js" as="script"><link rel="prefetch" href="/assets/js/10.8e879de9.js"><link rel="prefetch" href="/assets/js/11.b217e124.js"><link rel="prefetch" href="/assets/js/12.013bff42.js"><link rel="prefetch" href="/assets/js/13.3cdff795.js"><link rel="prefetch" href="/assets/js/14.b5ab60e6.js"><link rel="prefetch" href="/assets/js/15.50bec27e.js"><link rel="prefetch" href="/assets/js/16.c16c9f53.js"><link rel="prefetch" href="/assets/js/3.30ead0c9.js"><link rel="prefetch" href="/assets/js/4.c0014c96.js"><link rel="prefetch" href="/assets/js/5.811e20e2.js"><link rel="prefetch" href="/assets/js/6.dba0d004.js"><link rel="prefetch" href="/assets/js/8.6b384213.js"><link rel="prefetch" href="/assets/js/9.9b657d40.js">
    <link rel="stylesheet" href="/assets/css/0.styles.595b60ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Hao-Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaWeb</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java/JavaWeb.html#xml" class="sidebar-link">XML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#xml基本语法" class="sidebar-link">XML基本语法</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#xml解析" class="sidebar-link">XML解析</a></li></ul></li><li><a href="/Java/JavaWeb.html#tomcat" class="sidebar-link">Tomcat</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#创建-java-web-应用" class="sidebar-link">创建 Java Web 应用</a></li></ul></li><li><a href="/Java/JavaWeb.html#http-协议" class="sidebar-link">HTTP 协议</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Java/JavaWeb.html#servlet" class="sidebar-link">Servlet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#使用-servlet" class="sidebar-link">使用 Servlet</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#servlet体系" class="sidebar-link">Servlet体系</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#servlet-生命周期" class="sidebar-link">Servlet 生命周期</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#servletconfig" class="sidebar-link">ServletConfig</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#servletcontext" class="sidebar-link">ServletContext</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#httpservletrequest" class="sidebar-link">HttpServletRequest</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#httpservletresponse" class="sidebar-link">HttpServletResponse</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#请求转发、重定向" class="sidebar-link">请求转发、重定向</a></li><li class="sidebar-sub-header"><a href="/Java/JavaWeb.html#解决中文乱码" class="sidebar-link">解决中文乱码</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javaweb"><a href="#javaweb" class="header-anchor">#</a> JavaWeb</h1> <p><img src="https://good-person.gitee.io/blog-bed/6149807acda74c8e86238fcc7aa6cac3.png" alt=""></p> <h2 id="xml"><a href="#xml" class="header-anchor">#</a> XML</h2> <ul><li>概述：
<ul><li><strong>XML</strong> (e<strong>X</strong>tensible <strong>M</strong>arkup <strong>L</strong>anguage)：可扩展标记语言。由W3C组织发布，目前推荐遵守的是W3C组织于2000年发布的XML1.0规范。XML的使命，就是以一个统一的格式，组织有关系的数据，为不同平台下的应用程序服务。</li> <li>XML用来传输和存储数据，HTML用来显示数据。</li> <li>XML没有预定义标签，均为自定义标签。</li> <li>用途：
<ul><li>配置文件</li> <li>数据交换格式 (少)</li> <li>数据存储 (少)</li></ul></li></ul></li></ul> <h3 id="xml基本语法"><a href="#xml基本语法" class="header-anchor">#</a> XML基本语法</h3> <ul><li><p>Hello World：新建hello.xml (编码：UTF-8)：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>		<span class="token comment">&lt;!--XML声明--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>students</span><span class="token punctuation">&gt;</span></span>		<span class="token comment">&lt;!--根元素--&gt;</span>
    <span class="token comment">&lt;!--文档内容--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>student</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>亚当<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>gender</span><span class="token punctuation">&gt;</span></span>男<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>gender</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">&gt;</span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>student</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>student</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>夏娃<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>gender</span><span class="token punctuation">&gt;</span></span>女<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>gender</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">&gt;</span></span>300<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>student</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>students</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>语法</strong>：</p> <ul><li>XML声明：只能写在第一行，可以不写。</li> <li>只能有一个根标签。</li> <li>标签必须正确结束，标签不能交叉嵌套，不能以数字开头。</li> <li>严格区分大小写。</li> <li>标签的属性必须有值，且必须加引号(双引号/单引号)。</li> <li>注释不能嵌套。</li></ul></li> <li><p><strong>XML声明</strong>：</p> <ul><li>version：指定XML版本，固定值是1.0。</li> <li>encoding：指定的字符集，告诉解析器使用什么字符集进行解码。而xml文本编码有编辑器指定。</li></ul></li> <li><p><strong>CDATA 区</strong>：不希望XML解析器进行解析的内容。XML解析器会将CDATA区中的内容原封不动的输出。</p> <div class="language-xml extra-class"><pre class="language-xml"><code>&lt;![CDATA[内容]]
</code></pre></div></li></ul> <h3 id="xml解析"><a href="#xml解析" class="header-anchor">#</a> XML解析</h3> <p><strong>原理</strong>：指通过解析器读取XML文档，解释语法，并将文档转换为对象。<br> <strong>Java平台</strong>提供了 <strong>DOM</strong>(Document Object Model) 和 <strong>SAX</strong>(Simple API for XML)。</p> <ul><li><p>规范：</p> <p><img src="https://good-person.gitee.io/blog-bed/8ecaa786e0754ba6a2e51ac44fb01cba.png" alt=""></p></li> <li><p>DOM 对比 SAX：</p> <table><thead><tr><th style="text-align:center;"></th> <th style="text-align:left;">DOM</th> <th style="text-align:left;">SAX</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>速度</strong></td> <td style="text-align:left;">需要一次性加载整个XML文档，然后将文档转换为DOM树，速度较差</td> <td style="text-align:left;">顺序解析XML文档，无需将整个XML都加载到内存中，速度快</td></tr> <tr><td style="text-align:center;"><strong>重复访问</strong></td> <td style="text-align:left;">将XML转换为DOM树之后，在解析时，DOM树将常驻内存，可以重复访问</td> <td style="text-align:left;">顺序解析XML文档，已解析过的数据，如果没有保存，将不能获得，除非重新解析</td></tr> <tr><td style="text-align:center;"><strong>内存要求</strong></td> <td style="text-align:left;">内存占用较大</td> <td style="text-align:left;">内存占用率低</td></tr> <tr><td style="text-align:center;"><strong>修改</strong></td> <td style="text-align:left;">既可读取文档内容，又可以修改</td> <td style="text-align:left;">只能读取，不能修改</td></tr> <tr><td style="text-align:center;"><strong>复杂度</strong></td> <td style="text-align:left;">完全面向对象的解析方式，容易使用</td> <td style="text-align:left;">采用事件回调机制，通过事件的回调函数来解析XML文档，略复杂</td></tr></tbody></table></li> <li><p><a href="https://dom4j.github.io/" target="_blank" rel="noopener noreferrer">dom4j<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：dom4j是一个开源XML解析包。<br>
dom4j是一个非常优秀的Java XML API，具有性能优异、功能强大和极易使用的特点。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.dom4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dom4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><a href="https://www.w3school.com.cn/xpath/index.asp" target="_blank" rel="noopener noreferrer">Xpath 查询<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：XPath 是在 XML 文档中查找信息的语言。<br>
XPath通过元素和属性进行查找，简化了dom4j查找节点的过程，是W3C组织发布的标准。</p></li></ul> <h2 id="tomcat"><a href="#tomcat" class="header-anchor">#</a> Tomcat</h2> <ul><li><p>概述：<a href="http://tomcat.apache.org/" target="_blank" rel="noopener noreferrer">Tomcat<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目。因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。</p></li> <li><p>目录结构：官网下载解压。</p> <blockquote><ul><li><p><strong>bin</strong>：该目录下存放的是二进制可执行文件，如果是安装版，那么这个目录下会有两个exe文件：tomcat6.exe、tomcat6w.exe，前者是在控制台下启动Tomcat，后者是弹出GUI窗口启动Tomcat；如果是解压版，那么会有startup.bat和shutdown.bat文件，startup.bat用来启动Tomcat，但需要先配置JAVA_HOME环境变量才能启动，shutdawn.bat用来停止Tomcat；</p></li> <li><p><strong>conf</strong>：这是一个非常非常重要的目录，这个目录下有四个最为重要的文件：</p> <ul><li>server.xml：配置整个服务器信息。例如修改端口号</li> <li>tomcat-users.xml：存储tomcat用户的文件，这里保存的是tomcat的用户名及密码，以及用户的角色信息。可以按着该文件中的注释信息添加tomcat用户，然后就可以在Tomcat主页中进入Tomcat Manager页面了；</li> <li>web.xml：部署描述符文件，这个文件中注册了很多MIME类型，即文档类型。这些MIME类型是客户端与服务器之间说明文档类型的，如用户请求一个html网页，那么服务器还会告诉客户端浏览器响应的文档是text/html类型的，这就是一个MIME类型。客户端浏览器通过这个MIME类型就知道如何处理它了。当然是在浏览器中显示这个html文件了。但如果服务器响应的是一个exe文件，那么浏览器就不可能显示它，而是应该弹出下载窗口才对。MIME就是用来说明文档的内容是什么类型的！</li> <li>context.xml：对所有应用的统一配置，通常我们不会去配置它。</li></ul></li> <li><p>lib：Tomcat的类库，里面是一大堆jar文件。如果需要添加Tomcat依赖的jar文件，可以把它放到这个目录中，当然也可以把应用依赖的jar文件放到这个目录中，这个目录中的jar所有项目都可以共享之，但这样你的应用放到其他Tomcat下时就不能再共享这个目录下的jar包了，所以建议只把Tomcat需要的jar包放到这个目录下；</p></li> <li><p>logs：这个目录中都是日志文件，记录了Tomcat启动和关闭的信息，如果启动Tomcat时有错误，那么异常也会记录在日志文件中。</p></li> <li></li> <li><p>temp：存放Tomcat的临时文件，这个目录下的东西可以在停止Tomcat后删除！</p></li> <li><p><strong>webapps</strong>：存放web项目的目录，其中每个文件夹都是一个项目；如果这个目录下已经存在了目录，那么都是tomcat自带的项目。其中ROOT是一个特殊的项目，在地址栏中没有给出项目目录时，对应的就是ROOT项目。http://localhost:8080/examples，进入示例项目。其中examples就是项目名，即文件夹的名字。</p></li> <li><p>work：运行时生成的文件，最终运行的文件都在这里。通过webapps中的项目生成的！可以把这个目录下的内容删除，再次运行时会生再次生成work目录。当客户端用户访问一个JSP文件时，Tomcat会通过JSP生成Java文件，然后再编译Java文件生成class文件，生成的java和class文件都会存放到这个目录下。</p></li></ul></blockquote></li> <li><p>Hello World：</p> <ul><li><p>配置好 <strong>JAVA_HOME</strong>：</p> <p>运行<code>tomcat目录/bin/startup</code>； 或者<br>
配置<code>CATALINA_HOME=tomcat目录</code>，运行<code>tomat目录/bin/catalina run</code>。</p></li> <li><p>浏览器地址栏：<code>http://localhost:8080</code>或<code>http://127.0.0.1:8080</code><br> <img src="https://good-person.gitee.io/blog-bed/847415c6b86c44bba1078f4a7b31e6c7.png" alt=""></p></li></ul></li></ul> <h3 id="创建-java-web-应用"><a href="#创建-java-web-应用" class="header-anchor">#</a> 创建 Java Web 应用</h3> <p><img src="https://good-person.gitee.io/blog-bed/93e3551c1bfe4f4f884167c7e260d242.png" alt=""></p> <ul><li><p>补全目录：</p> <p><img src="https://good-person.gitee.io/blog-bed/b4a5730facce49cc8b3e0dd64d2e743d.png" alt=""></p> <ul><li>java：源代码目录。</li> <li>resources：资源目录。</li> <li>webapp：浏览器通过Tomcat服务器访问到的web目录。</li> <li>WEB-INF/web.xml：web应用的配置文件。必须放在webapp/WEB-INF目录下。</li></ul></li> <li><p>部署到Tomcat容器，运行：</p> <p><img src="https://good-person.gitee.io/blog-bed/2b031721baa04fc29be5058e03188623.png" alt=""></p></li> <li><p>浏览器：<code>http://localhost:8080</code> 或 <code>http://localhost:8080/index.jsp</code></p> <p><img src="https://good-person.gitee.io/blog-bed/5680c892c8714f1c88016f574c21b2fb.png" alt=""></p></li></ul> <h2 id="http-协议"><a href="#http-协议" class="header-anchor">#</a> HTTP 协议</h2> <ul><li><p>概述：<strong>HTTP</strong> (<strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol) <strong>超文本传输协议</strong>，是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。HHTP是一种详细规定了浏览器和万维网服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。</p> <ul><li><strong>报文</strong>：客户端与服务端通信时传输的内容。</li> <li>HTTP就是一个通信规则，这个规则规定了客户端发送给服务器的报文格式，也规定了服务器发送给客户端的报文格式。客户端发送给服务器的称为“请求报文”，服务器发送给客户端的称为“相应报文”。</li></ul></li> <li><p>会话方式：</p> <p><img src="https://good-person.gitee.io/blog-bed/9367f3c572fa49cb91326b7de0ec27c1.png" alt=""></p> <blockquote><p>每次连接只处理一个请求和一个响应。对每一个页面的访问，浏览器与WEB服务器都要建立一次单独的连接。浏览器到WEB服务器之间的所有通讯都是完全独立分开的请求和响应对。</p></blockquote> <ul><li><p><strong>HTTP 1.0</strong>：浏览器请求一个带有图片的网页，会由于下载图片而与服务器之间开启新的连接。</p> <blockquote><p>请求方式：GET、POST、HEAD</p></blockquote></li> <li><p><strong>HTTP 1.1</strong>：允许浏览器在拿到当前请求对应的全部资源后再断开连接，提高了效率。</p> <blockquote><p>请求方式：GET、POST、HEAD、OPTIONS、PUT、PATCH、DELETE、TRACE、CONNECT</p></blockquote></li></ul> <p><img src="https://good-person.gitee.io/blog-bed/b4de723aba0d43cc8ac57286c4995530.png" alt=""></p></li> <li><p>报文：</p> <ul><li><p><strong>报文格式</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>请求行
请求头
[空行]
请求体
</code></pre></div><p><img src="https://good-person.gitee.io/blog-bed/feb09da1c1324f2fb629cdba51feac90.png" alt=""></p> <div class="language- extra-class"><pre class="language-text"><code>响应行
响应头
[空行]
响应体
</code></pre></div><p><img src="https://good-person.gitee.io/blog-bed/957a6bf6fb0d43958d64eafbb0191fa0.png" alt=""></p></li> <li><p>GET和POST请求的区别：<strong>GET请求 没有请求体，而 POST请求 有。</strong></p> <blockquote><p>HTTP的底层是TCP/IP，所以GET和POST的底层也是TCP连接。HTTP规定，GET请求：要求设置method为GET，且把传送的数据返回在url中；POST请求：要求设置method为POST，把传送的数据放在请求体中(所以POST也可以像GET放数据在url上，但不符合要求)。浏览器通常限制url长度在2K个字节，所以GET请求的数据在2K之内，POST请求无限制(因为数据在请求体)。GET和POST还有一个重大区别：GET请求会把header和data一起发送，服务器响应200；POST请求先发送header，等服务器响应100再发送data，服务器响应200。由此GET请求比POST效率更高，但并不是所有浏览器POST请求都会发送两次TCP包。当网络环境好，发1次包和2次包的时间基本无差别。</p></blockquote></li> <li><p>HTTP请求方法：</p> <p><img src="https://good-person.gitee.io/blog-bed/bcc7ed2f75ec47d9b74e57095e5b187d.png" alt=""></p></li> <li><p>HTTP响应头：</p> <p><img src="https://good-person.gitee.io/blog-bed/1fdbd05cda5c4ecc8cb55da6d4ac9216.png" alt=""></p></li> <li><p><a href="https://www.runoob.com/http/http-status-codes.html" target="_blank" rel="noopener noreferrer">HTTP状态码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <p><img src="https://good-person.gitee.io/blog-bed/fc8951ad9ac6446296c41ddfffb6bde1.png" alt=""></p></li></ul></li></ul> <h2 id="servlet"><a href="#servlet" class="header-anchor">#</a> Servlet</h2> <ul><li><p>概述：</p> <ul><li>从广义上来讲：Servlet规范是Sun公司制定的一套技术标准，包含与Web应用相关的一系列接口，是Web应用实现方式的宏观解决方案。而具体的Servlet容器负责提供标准的实现。</li> <li>从狭义上来讲，Servlet指的是 <code>javax.servlet.Servlet</code> 接口及其子接口，也可以指实现了Servlet接口的实现类。</li> <li>Servlet的实例对象由Servlet容器(如Tomcat)负责创建；Servlet的方法由容器在特定情况下调用；Servlet容器会在Web应用卸载时销毁Servlet对象的实例。</li></ul> <p><img src="https://good-person.gitee.io/blog-bed/d8cb60b52a8b415aa426332f4c7aa411.png" alt=""></p></li></ul> <h3 id="使用-servlet"><a href="#使用-servlet" class="header-anchor">#</a> 使用 Servlet</h3> <ul><li><p>引入依赖：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>创建Servlet实现类，实现<code>javax.servlet.Servlet</code>：</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token comment">// 自定义类：org.example.servlet.HelloServlet</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
		<span class="token comment">// 向页面输出：Hello Servlet</span>
        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> servletResponse<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Servelt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>web.xml添加配置：</p> <div class="language-xml extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>4.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- 声明一个Servlet --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 为Servlet指定一个名称，以便于引用 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 注册Servlet实现类的全类名 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.example.servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 建立一个从虚拟路径到Servlet之间的映射关系 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 引用Servlet名称 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 映射到Servlet的虚拟路径：/hello --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><code>&lt;servlet-mapping&gt;</code> 的 <code>&lt;servlet-name&gt;</code> 对应 <code>&lt;servlet&gt;</code> 的 <code>&lt;servlet-name&gt;</code>。</p></blockquote></li> <li><p>浏览器输出地址<code>http://localhost:8080/hello</code> ：</p> <p><img src="https://good-person.gitee.io/blog-bed/7659e3e3bed5443b885f73f0d70da4fa.png" alt=""></p> <blockquote><ul><li><code>/hello</code> 对应 <code>&lt;url-pattern&gt;/hello&lt;/url-pattern&gt;</code>的值。</li> <li>如果项目名不是<code>/</code>或空白，如下图：</li></ul> <p><img src="https://good-person.gitee.io/blog-bed/e4d52a5287694d7fb5d03fe6ba629e19.png" alt=""></p></blockquote></li></ul> <h3 id="servlet体系"><a href="#servlet体系" class="header-anchor">#</a> Servlet体系</h3> <p><img src="https://good-person.gitee.io/blog-bed/6f29db1307c841a58e8e0d32439c83e5.png" alt=""></p> <ul><li><p>接口 <code>javax.servlet.Servlet</code>：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化Servlet对象，完成初始化工作。由servlet容器控制，该方法只能被调用一次。</span>
    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">;</span>

    <span class="token comment">// ServletConfig是容器向servlet传递参数的载体。</span>
    <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 接受客户端请求对象，执行业务操作，利用响应对象响应客户端请求。</span>
    <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> res<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取servlet相关信息。</span>
    <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 当容器监测到一个servlet从服务中被移除时，容器调用该方法，释放资源。</span>
    <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>抽象类 <code>javax.servlet.GenericServlet</code>：对Servlet功能进行了封装和完善，将service(ServletRequest req, ServletResponse res)保留为抽象方法，让使用者仅关心业务实现即可。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">GenericServlet</span> 
    <span class="token keyword">implements</span> <span class="token class-name">Servlet</span><span class="token punctuation">,</span> <span class="token class-name">ServletConfig</span><span class="token punctuation">,</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token class-name">Serializable</span>
</code></pre></div></li> <li><p>抽象类 <code>javax.servlet.http.HttpServlet</code>：对GenericServlet进行了进一步的封装和扩展，更贴近HTTP协议下的应用程序编写，在service(ServletRequest req, ServletResponse res)方法中，根据不同HTTP请求类型调用专门的方法进行处理。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">HttpServlet</span> <span class="token keyword">extends</span> <span class="token class-name">GenericServlet</span>
</code></pre></div></li> <li><p><strong>今后在实际使用中继承HttpServlet抽象类创建自己的Servlet实现类即可。重写 doGet、doPost、doPut、doDelete 等HTTP请求方法，在方法里面实现请求处理，不需要重写service方法。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Servlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="servlet-生命周期"><a href="#servlet-生命周期" class="header-anchor">#</a> Servlet 生命周期</h3> <p><strong>Servlet对象是Servlet容器创建的，生命周期方法都是由容器调用的。</strong></p> <p>Servlet对象：</p> <ol><li><strong>创建</strong>：默认情况下，Servlet容器第一次收到HTTP请求时创建对应Servlet对象。容器之所以能做到这一点是由于我们在注册Servlet时提供了全类名，容器使用反射技术创建了Servlet的对象。</li> <li><strong>初始化</strong>：Servlet容器创建Servlet对象之后，会调用init(ServletConfig config)方法，对其进行初始化。在javax.servlet.Servlet接口中，init(ServletConfig config)方法要求容器将ServletConfig的实例对象传入，这也是我们获取ServletConfig的实例对象的根本方法。</li> <li><strong>处理请求</strong>：在javax.servlet.Servlet接口中，定义了service(ServletRequest req, ServletResponse res)方法处理HTTP请求，同时要求容器将ServletRequest对象和ServletResponse对象传入。</li> <li><strong>销毁</strong>：服务器重启或服务器停止执行时会销毁Servlet对象，而销毁之前为了执行一些诸如释放缓存、关闭连接、保存数据等操作，所以设计了public void destroy()方法。</li></ol></li></ul> <h3 id="servletconfig"><a href="#servletconfig" class="header-anchor">#</a> <code>ServletConfig</code></h3> <p><code>javax.servlet.ServletConfig</code>：封装了Servlet的配置信息。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 获取&lt;servlet-name&gt;的值</span>
<span class="token class-name">String</span> <span class="token function">getServletName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取ServletContext对象(代表当前Web应用对象)</span>
<span class="token class-name">ServletContext</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获得所有&lt;init-param&gt;下&lt;param-name&gt;的值</span>
<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getInitParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过&lt;param-name&gt;去获取&lt;param-value&gt;</span>
<span class="token class-name">String</span> <span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.example.servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--初始化参数--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>k1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>v1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>k2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>v2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="servletcontext"><a href="#servletcontext" class="header-anchor">#</a> <code>ServletContext</code></h3> <ul><li><p><code>javax.servlet.ServletContext</code>：Web容器在启动时，它会为每个Web应用程序都创建一个对应的ServletContext对象，它代表当前Web应用。</p></li> <li><p><strong>ServletContext 主要的方法</strong>：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 获取虚拟路径所映射的绝对路径(虚拟路径,如index.html)</span>
<span class="token class-name">String</span> <span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获得所有&lt;context-param&gt;下&lt;param-name&gt;的值</span>
<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getInitParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过&lt;param-name&gt;去获取&lt;param-value&gt;</span>
<span class="token class-name">String</span> <span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取ServletContext对象所有属性的name</span>
<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAttributeNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取ServletContext对象的属性</span>
<span class="token class-name">Object</span> <span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加ServletContext对象的属性</span>
<span class="token keyword">void</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 移除ServletContext对象的属性</span>
<span class="token keyword">void</span> <span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><ul><li>由于一个Web应用程序中的<strong>所有Servlet都共享同一个ServletContext对象</strong>，所以ServletContext对象也被称为 application 对象 (Web应用程序对象)。</li> <li>在应用程序中能够获取运行环境或容器信息的对象通常称之为“上下文对象”。</li> <li><strong>ServletContext对象的属性(attribute)的作用域：整个web应用。</strong></li></ul></blockquote></li> <li><p><strong>配置Web应用的初始化参数</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">......</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>k1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>v1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>k2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>v2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="httpservletrequest"><a href="#httpservletrequest" class="header-anchor">#</a> <code>HttpServletRequest</code></h3> <ul><li><p><code>javax.servlet.http.HttpServletRequest</code>：是 <code>javax.servlet.ServletRequest</code> 的子接口，封装了HTTP请求的相关信息，由Servlet容器创建其实现类对象并传入service(ServletRequest req, ServletResponse res)方法中。</p></li> <li><p>主要功能：</p> <ul><li>获取请求参数。</li> <li>请求域保存数据</li> <li>请求转发</li> <li>获取项目虚拟路径</li></ul></li></ul> <h3 id="httpservletresponse"><a href="#httpservletresponse" class="header-anchor">#</a> <code>HttpServletResponse</code></h3> <ul><li><code>javax.servlet.http.HttpServletResponse</code>：是 <code>javax.servlet.ServletResponse</code> 的子接口，封装了HTTP响应的相关信息，由Servlet容器创建其实现类对象并传入service(ServletRequest req, ServletResponse res)方法中。</li> <li>主要功能：
<ul><li>向浏览器输出数据</li> <li>重定向</li></ul></li></ul> <h3 id="请求转发、重定向"><a href="#请求转发、重定向" class="header-anchor">#</a> 请求转发、重定向</h3> <ul><li><p>目的：实现控制页面跳转。</p></li> <li><p><strong>请求转发</strong>：Servlet接收到请求后并处理完成后。先不进行响应，而是在服务端内部“转发”给其他Servlet继续处理。所以浏览器只发出一次请求，浏览器地址栏的地址不会发生变化，用户感觉不到请求被转发。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.使用RequestDispatcher对象封装目标资源的虚拟路径</span>
    <span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request
        <span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.调用RequestDispatcher对象的forward()方法“前往”目标资源</span>
	<span class="token comment">//注意：传入的参数必须是传递给当前Servlet的service方法的那两个request和response对象</span>
    dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>重定向</strong>：Servlet接收到请求后并处理完成后，给浏览器一个特殊的响应，这个响应要求浏览器去请求一个新的资源。所以，整个过程，浏览器会发出两次请求，且浏览器地址栏的地址变为新资源的地址。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.调用HttpServletResponse对象的sendRedirect()方法</span>
    <span class="token comment">//2.传入的参数是目标资源的虚拟路径</span>
    response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>服务端以 <strong>302</strong> 状态码通知浏览器访问新地址</p></blockquote></li> <li><p>对比：</p> <table><thead><tr><th style="text-align:left;"></th> <th style="text-align:left;">请求转发</th> <th style="text-align:left;">重定向</th></tr></thead> <tbody><tr><td style="text-align:left;">浏览器地址栏</td> <td style="text-align:left;">不变</td> <td style="text-align:left;">变</td></tr> <tr><td style="text-align:left;">发送请求次数</td> <td style="text-align:left;">1</td> <td style="text-align:left;">2</td></tr> <tr><td style="text-align:left;">能否共享request对象的数据</td> <td style="text-align:left;">能</td> <td style="text-align:left;">不能</td></tr> <tr><td style="text-align:left;">能否访问WEB-INF下的资源</td> <td style="text-align:left;">能</td> <td style="text-align:left;">不能</td></tr></tbody></table></li></ul> <h3 id="解决中文乱码"><a href="#解决中文乱码" class="header-anchor">#</a> 解决中文乱码</h3> <ul><li><p><strong>中文乱码原因</strong>：编码：字符转换为二进制数。解码：二进制数转换为字符。如果编码与解码使用的字符集不一致就会产生乱码。所以，<strong>解决乱码的根本方法：统一编码和解码的字符集</strong>。</p></li> <li><p><strong>请求乱码</strong>：</p> <ul><li><p>HTML页面的字符集指定为：UTF-8。</p></li> <li><p>服务器解码：Tomcat7及之前，默认字符集是 <strong>ISO-8859-1</strong>。Tomcat8及之后，默认字符集是 <strong>UTF-8</strong>。</p></li> <li><p>解决：</p> <ul><li><p><strong>POST请求</strong>：</p> <div class="language-java extra-class"><pre class="language-java"><code>request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 在方法最开始设置</span>
</code></pre></div></li> <li><p><strong>GET请求</strong>：</p> <p>GET请求是通过URL传递参数，会被Tomcat服务器自动解码。对于默认字符集是 ISO-8859-1版本的Tomcat，无法通过request对象设置，必须在 <code>Tomcat目录/conf/server.xml</code> 配置。</p> <p><img src="https://good-person.gitee.io/blog-bed/f1304d94ec5f4dcdb58d19fef50c0bdb.png" alt=""></p></li></ul></li></ul></li> <li><p><strong>响应乱码</strong>：</p> <ul><li><p>原因：服务器编码 与 浏览器解码 使用的字符集不一致。</p></li> <li><p>解决：告诉Tomcat编码 与 浏览器解码 使用统一的字符集。(需要在输出之前设置)</p> <ul><li><p>设置响应头：</p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>设置响应的内容类型：</p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 用得多</span>
</code></pre></div></li></ul></li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.04a292d2.js" defer></script><script src="/assets/js/2.4fad892d.js" defer></script><script src="/assets/js/7.35746c6c.js" defer></script>
  </body>
</html>
